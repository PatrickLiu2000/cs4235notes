# Modern Malware
- previously, malware was done for attention and just for fun
- now, malware used for political and profit gain

## Botnet
- Bot - a compromised computer under the attacker's control
- bot code on compromised computer communicates with attacker's server and carries out malicious attacks on behalf of attacker
- Botnet - network of bots under attacker's control to carry out coordinated malicious activities
    - used for most internet based attacks/frauds
### Attack types used by botnets
- DDOS
    - have botnet all query large amount of data from same server/location
- spam
- phishing
- clickfraud
- cheating in games/polls
- keylogging
- terrorist/criminal communication

### Botnet Command and Control (C&C)
- needs to have a command and control from botmaster to bots
    - bot reports to botmaster its status, and redirects bot to download malware update/receives instructions to carry out attack

### Botnet Command and Control Problem
- if we create malware and spread it through email (spreading is simple), how would we use the compromised computers
    - naive approach: have victims contact botmaster
        - problem: must include malware author's address, single contact point, hard coded address
- Optimal design
    - efficient/reliable
    - stealthy
    - resilient
### Dynamic DNS Based C&C
- hardcode a string for the hacker's command server
    - each victim makes a DNS request for the IP address for the command server
    - if the IP is compromised, can have ISP reroute the requests to a sinkhole that malware researcher controls
- don't require direct communication with C&C server before beginning an attack

## Advanced Persistent Threat (APT)
- Advanced
    - special malware - special operation/operators
- Persistent
    - long-term presence, multi-step (slow)
    - can dedicate significant amount of time
- Threat
    - targeted at high-value org
- Attacker
    - typically state-sponsored
- long-term infiltration to extract information and remain undetected

### APT Characteristics
- zero day exploit/specially crafted malware
    - no available signature for its detection 
- social engineering to trick even most sophisticated users
    - first compromise core internal network control elements to learn about targets
    - play man in the middle on the compromised routers/server to make social engineering attacks convincing
- carry out intended mission, such as data tampering/exfiltration in a low/slow fashion to blend in with normal activites
- multiple deliberate steps over time, rather than a single attack act
### APT Detection
- network monitor to detect bad traffic
- host monitor that examines OS activites
- Malware analysis system that identifies malicious logic


## Malware Analysis
- goal is to produce info for detection/response
- *Static analysis* - attempts to understand what a malware instance would do if executed
- *Dynamic analysis* - attempts to understand what a program does when executed
    - typically ran in a virtualized environment
    - more robust than static analysis
- *Malware obfuscation*
    - packing - parts/all of executable file are compressed, encrypted/transformed
        - makes static analysis difficult
- *Unpacking*
    - manual packing not realistic
        - need automated unpacking that does not require a priori knowledge
    - detect execution of code not in static code model
